<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{title}}</title>
    <meta name="description" content="{{description}}">
    <link rel="stylesheet" href="styles.css">
    <meta property="og:title" content="{{title}}">
    <meta property="og:description" content="{{description}}">
    <meta property="og:image" content="{{ogImageUrl}}">
    <meta property="og:url" content="{{currentUrl}}">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="{{ogImageUrl}}">
    <meta property="fc:frame" content='{"version":"next","imageUrl":"{{ogImageUrl}}","button":{"title":"Open repository","action":{"type":"launch_frame","url":"{{currentUrl}}","name":"{{title}}","splashImageUrl":"{{splashImageUrl}}","splashBackgroundColor":"#f5f0ec"}}}' />
    <script type="module">
        import { sdk } from 'https://esm.sh/@farcaster/frame-sdk'
        
        // Call ready when the page is loaded
        async function rewriteLinks() {
            const links = document.querySelectorAll("a[href^='http']");
            for (let link of links) {
                link.addEventListener("click", (event) => {
                    event.preventDefault();
                    frame.sdk.actions.openUrl(link.getAttribute("href"));
                });
            }
        }
        window.addEventListener('load', async () => {
            try {
                await frame.sdk.actions.ready();
                console.log('Frame is ready');
                const ctx = await frame.sdk.context;
                ctx ? await rewriteLinks() : null;
            } catch (e) {
                console.error('Failed to initialize frame:', e);
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <div class="content">
            {{{content}}}
        </div>
        <div class="footer">
            <a href="https://github.com/{{owner}}/{{repo}}" class="github-button">View on Github</a>
        </div>
    </div>
</body>
</html> 